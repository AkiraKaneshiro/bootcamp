<!DOCTYPE HTML>
<!--[if IE 6]>
<html id="ie6" lang="en-US" class="ie ie6 lt-ie9">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US" class="ie ie7 lt-ie9">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US" class="ie ie8 lt-ie9">
<![endif]-->
<!--[if gte IE 9]>
<html lang="en-US" class="ie ie9">
<![endif]-->
<!--[if !(IE)]><!-->
<html lang="en-US" class="">
<head>
  <title>Data Exploration, Visualization, and Feature Engineering using R</title>
  <link rel="stylesheet" href="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/assets/css/reset.css">
  <link rel="stylesheet" href="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/css/flowtime.css">
  <link rel="stylesheet" href="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/css/themes/default.css">
  <link rel="stylesheet" href="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/assets/css/prism.css">
  <link rel="stylesheet" href="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/highlighters/highlight.js/css/tomorrow.css">  
</head>
<body>
  <div class="flowtime">
    <div class="ft-section " data-id="section-1">
<div class="ft-page " data-title="">
  <!-- no space between code and its results -->

<h2>Basic plotting systems</h2>

<ol>
<li>Base graphics: constructed piecemeal. Conceptually simpler and allows plotting to mirror the thought process.</li>
<li>Lattice graphics: entire plots created in a simple function call.</li>
<li>ggplot2 graphics: an implementation of the Grammar of Graphics by Leland Wikinson. Combines concepts from both base and lattice graphics. (Need to install ggplot2 library)</li>
<li>Fancier and more telling ones.</li>
</ol>

<p>A list of interactive visualization in R can be found at: <a href="http://ouzor.github.io/blog/2014/11/21/interactive-visualizations.html">http://ouzor.github.io/blog/2014/11/21/interactive-visualizations.html</a></p>
		
</div>
</div>
<div class="ft-section " data-id="section-2">
<div class="ft-page " data-title="">
  <h2>Base graphics</h2>

<pre><code class="r">library(datasets)
plot(x = airquality$Temp, y = airquality$Ozone)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-2-1.png" alt="plot of chunk unnamed-chunk-2"> </p>
		
</div>
  <div class="ft-page " data-title="Base graphics">
		<h2>Base graphics</h2>

<pre><code class="r">## par() function is used to specify global graphics parameters that affect all plots in an R session.
## Type ?par to see all parameters
par(mfrow = c(1, 2), mar = c(4, 4, 2, 1), oma = c(0, 0, 2, 0))
with(airquality, {
    plot(Wind, Ozone, main=&quot;Ozone and Wind&quot;)
    plot(Temp, Ozone, main=&quot;Ozone and Temperature&quot;)
    mtext(&quot;Ozone and Weather in New York City&quot;, outer=TRUE)})
</code></pre>

<p><img src="assets/fig/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3"> </p>
		
	</div>
  <div class="ft-page " data-title="Plotting functions">
		<h2>Plotting functions</h2>

<ul>
<li>lines: adds liens to a plot, given a vector of x values and corresponding vector of y values</li>
<li>points: adds a point to the plot</li>
<li>text: add text labels to a plot using specified x,y coordinates</li>
<li>title: add annotations to x,y axis labels, title, subtitles, outer margin</li>
<li>mtext: add arbitrary text to margins (inner or outer) of plot</li>
<li>axis: specify axis ticks</li>
</ul>
		
	</div>
</div>
<div class="ft-section " data-id="section-3">
<div class="ft-page " data-title="">
  <h2>Lattice graphics</h2>

<pre><code class="r">library(lattice) # need to load the lattice library
set.seed(10) # set the seed so our plots are the same
x &lt;- rnorm(100)
f &lt;- rep(1:4, each = 25) # first 25 elements are 1, second 25 elements are 2, ...
y &lt;- x + f - f * x+ rnorm(100, sd = 0.5)
f &lt;- factor(f, labels = c(&quot;Group 1&quot;, &quot;Group 2&quot;, &quot;Group 3&quot;, &quot;Group 4&quot;))
xyplot(y ~ x | f)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4"> </p>
		
</div>
  <div class="ft-page " data-title="Lattice graphics">
		<h2>Lattice graphics</h2>

<p>What more on the plot? Customize the panel funciton:</p>

<pre><code class="r">xyplot(y ~ x | f, panel = function(x, y, ...) {
    # call the default panel function for xyplot
    panel.xyplot(x, y, ...)
    # adds a horizontal line at the median
    panel.abline(h = median(y), lty = 2)
    # overlays a simple linear regression line
    panel.lmline(x, y, col = 2) 
})
</code></pre>
		
	</div>
  <div class="ft-page " data-title="Lattice graphics">
		<h2>Lattice graphics</h2>

<p><img src="assets/fig/unnamed-chunk-6-1.png" alt="plot of chunk unnamed-chunk-6"> </p>
		
	</div>
  <div class="ft-page " data-title="Lattice graphics">
		<h2>Lattice graphics</h2>

<p>Plotting functions</p>

<ul>
<li>xyplot():  main function for creating scatterplots</li>
<li>bwplot():  box and whiskers plots (box plots)</li>
<li>histogram():  histograms</li>
<li>stripplot():  box plot with actual points</li>
<li>dotplot():  plot dots on “violin strings”</li>
<li>splom():  scatterplot matrix (like pairs() in base plotting system)</li>
<li>levelplot()/contourplot():  plotting image data</li>
</ul>
		
	</div>
</div>
<div class="ft-section " data-id="section-4">
<div class="ft-page " data-title="">
  <h2>ggplot2</h2>
		
</div>
</div>
<div class="ft-section " data-id="section-5">
<div class="ft-page " data-title="">
  <h2>Titanic tragedy date</h2>

<p><img src="Titanic.jpg", style="width:791px;height:509px""></p>
		
</div>
</div>
<div class="ft-section " data-id="section-6">
<div class="ft-page " data-title="">
  <h2>Reading RAW training data</h2>

<ul>
<li>Download the data set &quot;Titanic_train.csv&quot; from ...!!!<br></li>
<li>Set working directory of R to the directory of the file using setwd().</li>
</ul>

<pre><code class="r">titanic = read.csv(&#39;Titanic_train.csv&#39;)
</code></pre>
		
</div>
  <div class="ft-page " data-title="Look at the first few rows">
		<h2>Look at the first few rows</h2>

<p>What would be some good features to consider here?</p>

<pre><code class="r">options(width = 110)
head(titanic)
</code></pre>

<pre><code>##   PassengerId Survived Pclass                                                Name    Sex Age SibSp Parch
## 1           1        0      3                             Braund, Mr. Owen Harris   male  22     1     0
## 2           2        1      1 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3           3        1      3                              Heikkinen, Miss. Laina female  26     0     0
## 4           4        1      1        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 5           5        0      3                            Allen, Mr. William Henry   male  35     0     0
## 6           6        0      3                                    Moran, Mr. James   male  NA     0     0
##             Ticket    Fare Cabin Embarked
## 1        A/5 21171  7.2500              S
## 2         PC 17599 71.2833   C85        C
## 3 STON/O2. 3101282  7.9250              S
## 4           113803 53.1000  C123        S
## 5           373450  8.0500              S
## 6           330877  8.4583              Q
</code></pre>
		
	</div>
  <div class="ft-page " data-title="What is the data type of each column?">
		<h2>What is the data type of each column?</h2>

<pre><code class="r">sapply(titanic,class)
</code></pre>

<pre><code>## PassengerId    Survived      Pclass        Name         Sex         Age 
##   &quot;integer&quot;   &quot;integer&quot;   &quot;integer&quot;    &quot;factor&quot;    &quot;factor&quot;   &quot;numeric&quot; 
##       SibSp       Parch      Ticket        Fare       Cabin    Embarked 
##   &quot;integer&quot;   &quot;integer&quot;    &quot;factor&quot;   &quot;numeric&quot;    &quot;factor&quot;    &quot;factor&quot;
</code></pre>
		
	</div>
  <div class="ft-page " data-title="Converting class label to a factor">
		<h2>Converting class label to a factor</h2>

<pre><code class="r">titanic$Survived = factor(titanic$Survived, labels=c(&quot;died&quot;, &quot;survived&quot;))
titanic$Embarked = factor(titanic$Embarked, labels=c(&quot;unkown&quot;, &quot;Cherbourg&quot;, &quot;Queenstown&quot;, &quot;Southampton&quot;))
sapply(titanic,class)
</code></pre>

<pre><code>## PassengerId    Survived      Pclass        Name         Sex         Age 
##   &quot;integer&quot;    &quot;factor&quot;   &quot;integer&quot;    &quot;factor&quot;    &quot;factor&quot;   &quot;numeric&quot; 
##       SibSp       Parch      Ticket        Fare       Cabin    Embarked 
##   &quot;integer&quot;   &quot;integer&quot;    &quot;factor&quot;   &quot;numeric&quot;    &quot;factor&quot;    &quot;factor&quot;
</code></pre>

<pre><code class="r">str(titanic$Survived)
</code></pre>

<pre><code>##  Factor w/ 2 levels &quot;died&quot;,&quot;survived&quot;: 1 2 2 2 1 1 1 1 2 2 ...
</code></pre>

<pre><code class="r">str(titanic$Sex)
</code></pre>

<pre><code>##  Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 2 1 1 1 2 2 2 2 1 1 ...
</code></pre>
		
	</div>
</div>
<div class="ft-section " data-id="section-7">
<div class="ft-page " data-title="">
  <h2>Class distribution - PIE Charts</h2>

<pre><code class="r">survivedTable = table(titanic$Survived)
survivedTable
</code></pre>

<pre><code>## 
##     died survived 
##      549      342
</code></pre>

<pre><code class="r">par(mar = c(0, 0, 0, 0), oma = c(0, 0, 0, 0))
pie(survivedTable,labels=c(&quot;Died&quot;,&quot;Survived&quot;))
</code></pre>

<p><img src="assets/fig/unnamed-chunk-11-1.png" alt="plot of chunk unnamed-chunk-11"> </p>
		
</div>
  <div class="ft-page " data-title="Is Sex a good predictor?">
		<h2>Is Sex a good predictor?</h2>

<!-- plotting area: http://research.stowers-institute.org/mcm/efg/R/Graphics/Basics/mar-oma/index.htm -->

<pre><code class="r">male = titanic[titanic$Sex==&quot;male&quot;,]
female = titanic[titanic$Sex==&quot;female&quot;,]
par(mfrow = c(1, 2), mar = c(0, 0, 2, 0), oma = c(0, 1, 0, 1))
pie(table(male$Survived),labels=c(&quot;Dead&quot;,&quot;Survived&quot;),  main=&quot;Survival Portion Among Men&quot;)
pie(table(female$Survived),labels=c(&quot;Dead&quot;,&quot;Survived&quot;), main=&quot;Survival Portion Among Women&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-12-1.png" alt="plot of chunk unnamed-chunk-12"> </p>
		
	</div>
</div>
<div class="ft-section " data-id="section-8">
<div class="ft-page " data-title="">
  <h2>Is Age a good predictor?</h2>

<pre><code class="r">Age &lt;- titanic$Age; summary(Age)
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    0.42   20.12   28.00   29.70   38.00   80.00     177
</code></pre>

<p>How about summary segmented by <strong>survival</strong></p>

<pre><code class="r">summary(titanic[titanic$Survived==&quot;0&quot;,]$Age)
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## 
</code></pre>

<pre><code class="r">summary(titanic[titanic$Survived==&quot;1&quot;,]$Age)
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## 
</code></pre>
		
</div>
  <div class="ft-page " data-title="Age distribution by Survival and Sex">
		<h2>Age distribution by Survival and Sex</h2>

<pre><code class="r">par(mfrow = c(1, 2), mar = c(4, 4, 2, 2), oma = c(1, 1, 1, 1))
boxplot(titanic$Age~titanic$Sex, main=&quot;Age Distribution By Gender&quot;,col=c(&quot;red&quot;,&quot;green&quot;))
boxplot(titanic$Age~titanic$Survived, main=&quot;Age Distribution By Survival&quot;,col=c(&quot;red&quot;,&quot;green&quot;),
        xlab=&quot;0:Died 1:Survived&quot;,ylab=&quot;Age&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-15-1.png" alt="plot of chunk unnamed-chunk-15"> </p>
		
	</div>
  <div class="ft-page " data-title="Histogram of Age">
		<h2>Histogram of Age</h2>

<pre><code class="r">hist(Age, col=&quot;blue&quot;, xlab=&quot;Age&quot;, ylab=&quot;Frequency&quot;,
     main = &quot;Distribution of Passenger Ages on Titanic&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-16-1.png" alt="plot of chunk unnamed-chunk-16"> </p>
		
	</div>
  <div class="ft-page " data-title="Kernel density plot of age">
		<h2>Kernel density plot of age</h2>

<pre><code class="r">d = density(na.omit(Age)) # density(Age) won&#39;t work, need to omit all NAs
plot(d, main = &quot;kernel density of Ages of Titanic Passengers&quot;)
polygon(d, col=&quot;red&quot;, border=&quot;blue&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-17-1.png" alt="plot of chunk unnamed-chunk-17"> </p>
		
	</div>
  <div class="ft-page " data-title="Comparison of density plots of Age with different Sex">
		<h2>Comparison of density plots of Age with different Sex</h2>

<p><img src="assets/fig/unnamed-chunk-18-1.png" alt="plot of chunk unnamed-chunk-18"> </p>
		
	</div>
  <div class="ft-page " data-title="Did Age have an impact on survival?">
		<h2>Did Age have an impact on survival?</h2>

<p><img src="assets/fig/unnamed-chunk-19-1.png" alt="plot of chunk unnamed-chunk-19"> </p>
		
	</div>
  <div class="ft-page " data-title="Create categorical groupings: Adult vs Child">
		<h2>Create categorical groupings: Adult vs Child</h2>

<p>An example of <strong>feature engineering</strong>!</p>

<pre><code class="r">## Multi dimensional comparison            
Child &lt;- titanic$Age # Isolating age.
## Now we need to create categories: NA = Unknown, 1 = Child, 2 = Adult
## Every age below 13 (exclusive) is classified into age group 1
Child[Child&lt;13] &lt;- 1
## Every child 13 or above is classified into age group 2
Child[Child&gt;=13] &lt;- 2
</code></pre>

<pre><code class="r"># Use labels instead of 0&#39;s and 1&#39;s
Child[Child==1] &lt;- &quot;Child&quot;
Child[Child==2] &lt;- &quot;Adult&quot;
# Appends the new column to the titanic dataset
titanic_with_child_column &lt;- cbind(titanic, Child)
# Removes rows where age is NA
titanic_with_child_column &lt;- titanic_with_child_column[!is.na(titanic_with_child_column$Child),]
</code></pre>
		
	</div>
</div>
<div class="ft-section " data-id="section-9">
<div class="ft-page " data-title="">
  <h2>Fare matters?</h2>

<p><img src="assets/fig/unnamed-chunk-22-1.png" alt="plot of chunk unnamed-chunk-22"> </p>
		
</div>
  <div class="ft-page " data-title="How about fare, ship class, port embarkation?">
		<h2>How about fare, ship class, port embarkation?</h2>

<p><img src="assets/fig/unnamed-chunk-23-1.png" alt="plot of chunk unnamed-chunk-23"> </p>
		
	</div>
</div>
<div class="ft-section " data-id="section-10">
<div class="ft-page " data-title="">
  <h2>Diamond date</h2>

<p><img src="Diamond.jpg", style="width:791px;height:509px""></p>
		
</div>
</div>
<div class="ft-section " data-id="section-11">
<div class="ft-page " data-title="">
  <h2>Overview of the diamond data</h2>

<pre><code class="r">data(diamonds) # loading diamonds data set
head(diamonds, 16) # first few rows of diamond data set
</code></pre>

<pre><code>##    carat       cut color clarity depth table price    x    y    z
## 1   0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
## 2   0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
## 3   0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
## 4   0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
## 5   0.31      Good     J     SI2  63.3    58   335 4.34 4.35 2.75
## 6   0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48
## 7   0.24 Very Good     I    VVS1  62.3    57   336 3.95 3.98 2.47
## 8   0.26 Very Good     H     SI1  61.9    55   337 4.07 4.11 2.53
## 9   0.22      Fair     E     VS2  65.1    61   337 3.87 3.78 2.49
## 10  0.23 Very Good     H     VS1  59.4    61   338 4.00 4.05 2.39
## 11  0.30      Good     J     SI1  64.0    55   339 4.25 4.28 2.73
## 12  0.23     Ideal     J     VS1  62.8    56   340 3.93 3.90 2.46
## 13  0.22   Premium     F     SI1  60.4    61   342 3.88 3.84 2.33
## 14  0.31     Ideal     J     SI2  62.2    54   344 4.35 4.37 2.71
## 15  0.20   Premium     E     SI2  60.2    62   345 3.79 3.75 2.27
## 16  0.32   Premium     E      I1  60.9    58   345 4.38 4.42 2.68
</code></pre>
		
</div>
  <div class="ft-page " data-title="Histogram of carat">
		<h2>Histogram of carat</h2>

<pre><code class="r">library(ggplot2)
ggplot(data=diamonds) + geom_histogram(aes(x=carat))
</code></pre>

<pre><code>## stat_bin: binwidth defaulted to range/30. Use &#39;binwidth = x&#39; to adjust this.
</code></pre>

<p><img src="assets/fig/unnamed-chunk-25-1.png" alt="plot of chunk unnamed-chunk-25"> </p>
		
	</div>
  <div class="ft-page " data-title="Density plot of carat">
		<h2>Density plot of carat</h2>

<pre><code class="r">ggplot(data=diamonds) + 
geom_density(aes(x=carat),fill=&quot;gray50&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-26-1.png" alt="plot of chunk unnamed-chunk-26"> </p>
		
	</div>
  <div class="ft-page " data-title="Scatter plots (carat vs. price)">
		<h2>Scatter plots (carat vs. price)</h2>

<pre><code class="r">ggplot(diamonds, aes(x=carat,y=price)) + geom_point()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-27-1.png" alt="plot of chunk unnamed-chunk-27"> </p>
		
	</div>
  <div class="ft-page " data-title="Carat with colors">
		<h2>Carat with colors</h2>

<pre><code class="r">g = ggplot(diamonds, aes(x=carat, y=price)) # saving first layer as variable
g + geom_point(aes(color=color)) # rendering first layer and adding another layer
</code></pre>

<p><img src="assets/fig/unnamed-chunk-28-1.png" alt="plot of chunk unnamed-chunk-28"> </p>
		
	</div>
  <div class="ft-page " data-title="Carat with colors (more details)">
		<h2>Carat with colors (more details)</h2>

<pre><code class="r">g + geom_point(aes(color=color)) + facet_wrap(~color)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-29-1.png" alt="plot of chunk unnamed-chunk-29"> </p>
		
	</div>
  <div class="ft-page " data-title="Let&amp;#39;s consider cut and clarity">
		<h2>Let&#39;s consider cut and clarity</h2>

<p><img src="assets/fig/unnamed-chunk-30-1.png" alt="plot of chunk unnamed-chunk-30"> </p>
		
	</div>
  <div class="ft-page " data-title="Your trun!">
		<h2>Your trun!</h2>

<h3>What is your knowledge of diamond&#39;s price after exploring this data?</h3>

<p><img src="DiamondExport.jpg", style="width:568px;height:392px""></p>
		
	</div>
</div>
<div class="ft-section " data-id="section-12">
<div class="ft-page " data-title="">
  <h2>Tell your story - R Markdown</h2>
		
</div>
</div>
<div class="ft-section " data-id="section-13">
<div class="ft-page " data-title="">
  <h2>Present your story of Titanic!</h2>

<p>Use</p>

<ul>
<li>Plotting functions in R</li>
<li>R Markdown</li>
<li>Titanic data</li>
<li><strong>The heart of data explorer</strong></li>
</ul>

<p>to write your story of Titanic...</p>
		
</div>
</div>
  </div>
</body>
  <script src="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/js/brav1toolbox.js"></script>
  <script src="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/js/flowtime.js"></script>
	<script src="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/frameworks/flowtime/assets/js/prism.js"></script>
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="/home/yuhui/Copy/YDSDojo/bootcamp/slidify/slidifyExamples/libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
    <script>
    // Configuration API test
		Flowtime.showProgress(true);
		// Flowtime.fragmentsOnSide(true);
		// Flowtime.fragmentsOnBack(true);
		// Flowtime.useHistory(false);
		// Flowtime.slideInPx(true);
		// Flowtime.sectionsSlideToTop(true);
		// Flowtime.gridNavigation(false);
		// Flowtime.useOverviewVariant(true);
		Flowtime.parallaxInPx(true);
    Flowtime.start();
  </script>
</html>